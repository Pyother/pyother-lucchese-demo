<div x-data="productSelector()" x-init="init()" class="flex flex-col">

    <!-- Breadcrumbs -->
    {% render 'content/breadcrumbs' %}
    <!--  -->

    <div class="flex flex-col md:flex-row ">

        <!-- Gallery -->
        {% render 'content/gallery' %}
        <!--  -->

        <!-- Product -->
        {% render 'content/product' with products as products %}
        <!--  -->

    </div>
</div>

<script>
    function productSelector() {
        return { 
            products: {{products | json | safe}},
            selectedProduct: null,
            init() {
                if (this.products.length > 0) {
                    this.selectedProduct = this.products[0];
                }
            },
            selectProduct(product) {
                this.selectedProduct = product;
            }
        }
    }
</script>